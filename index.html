<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RateIt - Rate Anything</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-main">
                <h1>RateIt</h1>
                <p>Rate anything you want!</p>
                <div class="visitor-counter">
                    <span class="visitor-icon">ğŸ‘ï¸</span>
                    <span id="visitor-count">0</span> visitors
                </div>
            </div>
            <div class="header-auth" id="header-auth">
                <button id="header-signin-btn" class="header-auth-btn">Sign In</button>
                <button id="header-signup-btn" class="header-auth-btn">Sign Up</button>
            </div>
            <div class="header-user" id="header-user" style="display: none;">
                <span class="user-welcome">Welcome, <span id="header-user-name">User</span>!</span>
                <button id="my-posts-btn" class="header-auth-btn" onclick="openMyPosts()">ğŸ“ My Posts</button>
                <button id="admin-dashboard-btn" class="header-auth-btn admin-btn" onclick="openAdminDashboard()" style="display: none;">ğŸ›¡ï¸ Admin Dashboard</button>
                <button id="header-signout-btn" class="header-auth-btn signout">Sign Out</button>
            </div>
        </div>
    </header>

    <!-- Bot Verification Modal -->
    <div id="bot-verification-modal" class="bot-verification-modal" style="display: none;">
        <div class="bot-verification-content">
            <h2>ğŸ”’ Verify You're Human</h2>
            <p>Please slide to verify you're not a bot</p>
            <div class="slider-container">
                <div class="slider-track">
                    <div class="slider-thumb" id="slider-thumb">
                        <span class="slider-arrow">â†’</span>
                    </div>
                    <div class="slider-text">Slide to verify</div>
                    <div class="slider-progress" id="slider-progress"></div>
                </div>
            </div>
            <div class="verification-status" id="verification-status"></div>
        </div>
    </div>

    <section class="auth-section" id="auth-section">
        <div class="auth-container">
            <div class="auth-tabs">
                <button class="auth-tab active" id="signin-tab">Sign In</button>
                <button class="auth-tab" id="signup-tab">Sign Up</button>
            </div>
            
            <div class="auth-form" id="signin-form">
                <h3>Sign In</h3>
                <input type="text" id="signin-username" placeholder="Username" required>
                <input type="password" id="signin-password" placeholder="Password" required>
                <button type="button" id="signin-btn">Sign In</button>
                <div style="margin-top: 10px; display: flex; gap: 5px; flex-wrap: wrap;">
                    <button type="button" onclick="window.debugRating?.forceSignIn()" style="padding: 5px 10px; font-size: 0.8em; background: #28a745; color: white; border: none; border-radius: 4px;">
                        Force Sign In
                    </button>
                    <button type="button" onclick="window.debugRating?.fillTestCredentials()" style="padding: 5px 10px; font-size: 0.8em; background: #17a2b8; color: white; border: none; border-radius: 4px;">
                        Fill Test Data
                    </button>
                    <button type="button" onclick="window.debugRating?.testFullSignIn()" style="padding: 5px 10px; font-size: 0.8em; background: #ffc107; color: black; border: none; border-radius: 4px;">
                        Test Full Sign In
                    </button>
                    <button type="button" onclick="openMyPosts()" style="padding: 5px 10px; font-size: 0.8em; background: #ff0080; color: white; border: none; border-radius: 4px;">
                        TEST My Posts
                    </button>
                    <button type="button" onclick="fixScrolling()" style="padding: 5px 10px; font-size: 0.8em; background: #6c757d; color: white; border: none; border-radius: 4px;">
                        Fix Scroll
                    </button>
                </div>
            </div>
            
            <div class="auth-form" id="signup-form" style="display: none;">
                <h3>Sign Up</h3>
                <input type="text" id="signup-name" placeholder="Name or Company" required>
                <input type="password" id="signup-password" placeholder="Password" required>
                <button type="button" id="signup-btn">Sign Up</button>
            </div>
        </div>
    </section>

    <section class="user-section" id="user-section" style="display: none;">
        <div class="current-user">
            <span>Signed in as: <strong id="user-display"></strong></span>
            <button id="sign-out">Sign Out</button>
        </div>
    </section>

    <main id="main-content" style="display: none;">
        <section class="add-item">
            <h2>Add New Item to Rate</h2>
            <form id="add-item-form">
                <input type="text" id="item-name" placeholder="What do you want to rate?" required>
                <div class="category-search-container">
                    <input type="text" id="category-search" placeholder="Search and select category..." autocomplete="off">
                    <div class="category-dropdown" id="category-dropdown" style="display: none;">
                        <!-- Categories will be populated here -->
                    </div>
                    <input type="hidden" id="category" value="">
                </div>
                <textarea id="description" placeholder="Description (optional)"></textarea>
                <div class="rating-input">
                    <label>Your Rating:</label>
                    <div class="add-item-stars" id="add-item-stars">
                        <span class="star" data-rating="1">â˜…</span>
                        <span class="star" data-rating="2">â˜…</span>
                        <span class="star" data-rating="3">â˜…</span>
                        <span class="star" data-rating="4">â˜…</span>
                        <span class="star" data-rating="5">â˜…</span>
                    </div>
                    <span id="selected-rating">0</span>/5
                </div>
                <textarea id="user-review" placeholder="Write your review (optional)"></textarea>
                <button type="submit">Add Item with Rating</button>
                <div style="margin-top: 10px; display: flex; gap: 5px; flex-wrap: wrap;">
                    <button type="button" onclick="window.debugRating?.app.setAddItemRating(5)" style="padding: 5px 10px; font-size: 0.8em; background: #ffc107; color: black; border: none; border-radius: 4px;">
                        Test: Set 5 Stars
                    </button>
                    <button type="button" onclick="console.log('Current rating:', window.debugRating?.app.selectedRating)" style="padding: 5px 10px; font-size: 0.8em; background: #6c757d; color: white; border: none; border-radius: 4px;">
                        Check Rating
                    </button>
                </div>
            </form>
        </section>

        <section class="auth-prompt" id="auth-prompt" style="display: none;">
            <div class="auth-prompt-content">
                <h2>ğŸ” Sign In Required</h2>
                <p>You need to be signed in to create posts and rate items.</p>
                <div class="auth-prompt-buttons">
                    <button id="prompt-signin-btn" class="header-auth-btn">Sign In</button>
                    <button id="prompt-signup-btn" class="header-auth-btn">Create Account</button>
                </div>
            </div>
        </section>

        <div class="main-layout">
            <div class="content-area">
                <section class="filters">
                    <div class="filter-row">
                        <div class="search-container">
                            <input type="text" id="search" placeholder="Search items, categories, descriptions..." autocomplete="off">
                            <div class="search-overall-rating" id="search-overall-rating" style="display: none;">
                                <!-- Overall rating will appear here -->
                            </div>
                            <div class="search-results-dropdown" id="search-results-dropdown" style="display: none;">
                                <!-- Search results will appear here -->
                            </div>
                        </div>
                        <select id="filter-category">
                            <option value="">All Categories</option>
                            <option value="food">ğŸ” Food & Dining</option>
                            <option value="restaurants">ğŸ½ï¸ Restaurants</option>
                            <option value="recipes">ğŸ‘©â€ğŸ³ Recipes</option>
                            <option value="drinks">ğŸ¹ Drinks & Beverages</option>
                            <option value="entertainment">ğŸ¬ Movies & TV</option>
                            <option value="music">ğŸµ Music</option>
                            <option value="books">ğŸ“š Books</option>
                            <option value="games">ğŸ® Video Games</option>
                            <option value="boardgames">ğŸ² Board Games</option>
                            <option value="sports">âš½ Sports</option>
                            <option value="fitness">ğŸ’ª Fitness & Health</option>
                            <option value="places">ğŸ“ Places & Travel</option>
                            <option value="hotels">ğŸ¨ Hotels</option>
                            <option value="attractions">ğŸ¢ Attractions</option>
                            <option value="events">ğŸ‰ Events</option>
                            <option value="technology">ğŸ’» Technology</option>
                            <option value="software">ğŸ–¥ï¸ Software & Apps</option>
                            <option value="gadgets">ğŸ“± Gadgets</option>
                            <option value="shopping">ğŸ›’ Shopping</option>
                            <option value="fashion">ğŸ‘— Fashion & Style</option>
                            <option value="beauty">ğŸ’„ Beauty & Cosmetics</option>
                            <option value="home">ğŸ  Home & Garden</option>
                            <option value="automotive">ğŸš— Automotive</option>
                            <option value="education">ğŸ“ Education</option>
                            <option value="courses">ğŸ“– Online Courses</option>
                            <option value="services">ğŸ”§ Services</option>
                            <option value="healthcare">ğŸ¥ Healthcare</option>
                            <option value="finance">ğŸ’° Finance & Banking</option>
                            <option value="art">ğŸ¨ Art & Culture</option>
                            <option value="photography">ğŸ“¸ Photography</option>
                            <option value="podcasts">ğŸ™ï¸ Podcasts</option>
                            <option value="youtube">ğŸ“º YouTube Channels</option>
                            <option value="websites">ğŸŒ Websites</option>
                            <option value="productivity">âš¡ Productivity Tools</option>
                            <option value="pets">ğŸ• Pets & Animals</option>
                            <option value="other">ğŸ”¹ Other</option>
                        </select>
                    </div>
                    
                    <div class="advanced-filters">
                        <select id="filter-rating">
                            <option value="">All Ratings</option>
                            <option value="5">5 Stars</option>
                            <option value="4">4+ Stars</option>
                            <option value="3">3+ Stars</option>
                            <option value="2">2+ Stars</option>
                            <option value="1">1+ Stars</option>
                        </select>
                        
                        <select id="filter-review-count">
                            <option value="">Any # Reviews</option>
                            <option value="1">1+ Reviews</option>
                            <option value="5">5+ Reviews</option>
                            <option value="10">10+ Reviews</option>
                            <option value="20">20+ Reviews</option>
                        </select>
                        
                        <select id="filter-comment-count">
                            <option value="">Any # Comments</option>
                            <option value="1">Has Comments</option>
                            <option value="5">5+ Comments</option>
                            <option value="10">10+ Comments</option>
                        </select>
                        
                        <button id="clear-filters" class="clear-filters-btn">Clear Filters</button>
                        <button id="show-top-reviewers" class="top-reviewers-btn">ğŸ† Top Reviewers</button>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- Top Reviewers Modal -->
        <div id="top-reviewers-modal" class="top-reviewers-modal" style="display: none;">
            <div class="top-reviewers-modal-content">
                <div class="modal-header">
                    <h3>ğŸ† Top Reviewers</h3>
                    <button id="close-top-reviewers" class="close-modal-btn">Ã—</button>
                </div>
                <div id="top-reviewers-list">
                    <div class="loading">Loading reviewers...</div>
                </div>
            </div>
        </div>

        <!-- Item Details Modal -->
        <div id="item-details-modal" class="item-details-modal" style="display: none;">
            <div class="item-details-modal-content">
                <div class="modal-header">
                    <h3 id="item-details-title">Item Details</h3>
                    <button id="close-item-details" class="close-modal-btn">Ã—</button>
                </div>
                <div id="item-details-content">
                    <div class="item-details-info">
                        <div class="item-details-main">
                            <div class="item-details-name" id="item-details-name">Item Name</div>
                            <div class="item-details-category" id="item-details-category">Category</div>
                            <div class="item-details-description" id="item-details-description">Description</div>
                        </div>
                        <div class="item-details-rating">
                            <div class="overall-rating-display">
                                <div class="overall-rating-stars" id="item-details-stars">â˜†â˜†â˜†â˜†â˜†</div>
                                <div class="overall-rating-text">
                                    <span class="rating-score" id="item-details-score">0.0</span>
                                    <span class="rating-count" id="item-details-count">(0 reviews)</span>
                                </div>
                            </div>
                            <button id="add-my-rating-btn" class="add-rating-btn">Rate This Item</button>
                        </div>
                    </div>
                    
                    <div class="all-reviews-section" id="all-reviews-section">
                        <h4>All Reviews</h4>
                        <div id="all-reviews-list">
                            <!-- Reviews will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Rating Modal -->
        <div id="profile-rating-modal" class="profile-rating-modal" style="display: none;">
            <div class="profile-rating-modal-content">
                <div class="modal-header">
                    <h3>ğŸ‘¤ Rate User Profile</h3>
                    <button id="close-profile-rating" class="close-modal-btn">Ã—</button>
                </div>
                <div id="profile-rating-content">
                    <div class="profile-info">
                        <h4 id="profile-user-name">User Name</h4>
                        <div class="profile-stats">
                            <span id="profile-review-count">0 reviews</span>
                            <span id="profile-avg-rating">0.0â˜… average</span>
                        </div>
                    </div>
                    <div class="profile-rating-form">
                        <label>Rate this user's profile:</label>
                        <div class="profile-rating-stars" id="profile-rating-stars">
                            <span class="star" data-rating="1">â˜…</span>
                            <span class="star" data-rating="2">â˜…</span>
                            <span class="star" data-rating="3">â˜…</span>
                            <span class="star" data-rating="4">â˜…</span>
                            <span class="star" data-rating="5">â˜…</span>
                        </div>
                        <span id="profile-selected-rating">0</span>/5
                        <textarea id="profile-review-text" placeholder="Write a review about this user's profile and reviewing style (optional)"></textarea>
                        <button id="submit-profile-rating">Submit Profile Rating</button>
                    </div>
                    <div class="existing-profile-ratings" id="existing-profile-ratings">
                        <h5>Profile Ratings:</h5>
                        <div id="profile-ratings-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Posts Modal -->
        <div id="my-posts-modal" class="my-posts-modal" style="display: none;">
            <div class="my-posts-modal-content">
                <div class="modal-header">
                    <h3>ğŸ“ My Posts & Comments</h3>
                    <button id="close-my-posts" class="close-modal-btn">Ã—</button>
                </div>
                <div id="my-posts-content">
                    <div class="posts-tabs">
                        <button class="posts-tab active" id="my-reviews-tab">My Reviews</button>
                        <button class="posts-tab" id="my-comments-tab">My Comments</button>
                    </div>
                    <div id="my-reviews-section" class="posts-section">
                        <div id="my-reviews-list">
                            <!-- User's reviews will be populated here -->
                        </div>
                    </div>
                    <div id="my-comments-section" class="posts-section" style="display: none;">
                        <div id="my-comments-list">
                            <!-- User's comments will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard Modal -->
        <div id="admin-dashboard-modal" class="admin-dashboard-modal" style="display: none;">
            <div class="admin-dashboard-modal-content">
                <div class="modal-header">
                    <h3>ğŸ›¡ï¸ Admin Dashboard</h3>
                    <button id="close-admin-dashboard" class="close-modal-btn">Ã—</button>
                </div>
                <div id="admin-dashboard-content">
                    <div class="admin-tabs">
                        <button class="admin-tab active" id="users-tab">ğŸ‘¥ Users</button>
                        <button class="admin-tab" id="content-tab">ğŸ“ Content</button>
                        <button class="admin-tab" id="stats-tab">ğŸ“Š Statistics</button>
                    </div>
                    
                    <div id="admin-users-section" class="admin-section">
                        <h4>User Management</h4>
                        <div id="admin-users-list">
                            <!-- Users will be populated here -->
                        </div>
                    </div>
                    
                    <div id="admin-content-section" class="admin-section" style="display: none;">
                        <h4>Content Management</h4>
                        <div class="admin-actions">
                            <button id="delete-all-items" class="admin-action-btn danger">ğŸ—‘ï¸ Delete All Items</button>
                            <button id="delete-all-reviews" class="admin-action-btn danger">ğŸ—‘ï¸ Delete All Reviews</button>
                            <button id="delete-all-comments" class="admin-action-btn danger">ğŸ—‘ï¸ Delete All Comments</button>
                            <button id="export-data" class="admin-action-btn">ğŸ“¥ Export All Data</button>
                        </div>
                        <div id="admin-content-list">
                            <!-- Content will be populated here -->
                        </div>
                    </div>
                    
                    <div id="admin-stats-section" class="admin-section" style="display: none;">
                        <h4>Platform Statistics</h4>
                        <div id="admin-stats-display">
                            <!-- Stats will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section class="items-grid" id="items-grid">
        </section>
    </main>

    <footer class="page-footer">
        <p>Last updated: <span id="last-updated"></span></p>
    </footer>

    <script src="script.js"></script>
    <script src="debug.js"></script>
    <script src="fix-auth.js"></script>
    <script>
        // Display last updated time
        const lastUpdated = document.getElementById('last-updated');
        if (lastUpdated) {
            const now = new Date();
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                timeZoneName: 'short'
            };
            lastUpdated.textContent = now.toLocaleString('en-US', options);
        }
    </script>
</body>
</html>